<!DOCTYPE html>
<html>
  <head>
    <title>우주 시뮬레이션</title>
    <style>
      body {
        background-color: black;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <script>
      var planets = [];

      var canvas = document.createElement("canvas");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      canvas.style.position = "absolute";
      canvas.style.left = "0";
      canvas.style.top = "0";
      document.body.appendChild(canvas);

      canvas.addEventListener("mousedown", function (e) {
        if (e.button === 0) {
          createPlanet(e.pageX, e.pageY, true);
        } else if (e.button === 2) {
          createPlanet(e.pageX, e.pageY, false);
        }
      });

      function createPlanet(x, y, gravity) {
        var planet = {
          x: x,
          y: y,
          vx: 0,
          vy: 0,
          radius: 20,
          mass: 10,
          color: "#" + Math.floor(Math.random() * 16777215).toString(16),
          gravity: gravity,
        };
        planets.push(planet);
      }

      function update() {
        var ctx = canvas.getContext("2d");
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        for (var i = 0; i < planets.length; i++) {
          var planet = planets[i];
          ctx.beginPath();
          ctx.arc(planet.x, planet.y, planet.radius, 0, 2 * Math.PI);
          ctx.fillStyle = planet.color;
          ctx.fill();

          if (planet.gravity) {
            ctx.beginPath();
            ctx.arc(planet.x, planet.y, planet.radius, 0, 2 * Math.PI);
            ctx.strokeStyle = "gray";
            ctx.stroke();

            for (var j = 0; j < planets.length; j++) {
              if (i !== j) {
                var planet2 = planets[j];
                var dx = planet2.x - planet.x;
                var dy = planet2.y - planet.y;
                var distance = Math.sqrt(dx * dx + dy * dy);
                var force = (planet.mass * planet2.mass) / distance / distance;
                var ax = (force * dx) / distance;
                var ay = (force * dy) / distance;
                planet.vx += ax;
                planet.vy += ay;
              }
            }
          }

          planet.x += planet.vx;
          planet.y += planet.vy;

          if (
            planet.x + planet.radius < 0 ||
            planet.x - planet.radius > canvas.width ||
            planet.y + planet.radius < 0 ||
            planet.y - planet.radius > canvas.height
          ) {
            planets.splice(i, 1);
            i--;
          }
        }

        requestAnimationFrame(update);
      }

      update();
    </script>
  </body>
</html>
